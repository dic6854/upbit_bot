# 업비트 자동 거래 프로그램 사용 설명서

## 프로그램 개요
이 프로그램은 업비트 API를 이용하여 5분봉 기준 20SMA(단순이동평균선) 돌파 전략으로 자동 거래를 수행합니다.

## 거래 전략
- **매수 조건**: 5분봉 종가가 20SMA를 상향 돌파할 때 (이전 봉은 20SMA 아래, 현재 봉은 20SMA 위)
- **매도 조건**: 5분봉 종가가 20SMA를 하향 돌파할 때 (이전 봉은 20SMA 위, 현재 봉은 20SMA 아래)
- **초기 자본금**: 1,000,000원
- **매수 수량**: 현재 보유 자본금으로 살 수 있는 최대 수량
- **매도 수량**: 보유 중인 코인 전량
- **수익금 관리**: 매도 후 수익이 발생하면 수익금은 별도로 보관하고, 자본금은 초기 자본금(1,000,000원)으로 유지

## 설치 및 실행 방법

### 1. 필요한 패키지 설치
```
pip install pyupbit pandas
```

### 2. 업비트 API 키 발급
1. 업비트 웹사이트(https://upbit.com)에 로그인합니다.
2. [마이페이지] > [API 키 관리]로 이동합니다.
3. [Open API 키 발급] 버튼을 클릭합니다.
4. 필요한 권한(주문하기, 출금하기 등)을 선택하고 API 키를 발급받습니다.
5. 발급받은 Access Key와 Secret Key를 안전하게 보관합니다.

### 3. 프로그램 설정
`upbit_trading_bot_final.py` 파일을 열고 다음 부분을 수정합니다:

```python
# API 키 설정
ACCESS_KEY = "your_access_key"  # 발급받은 Access Key로 변경
SECRET_KEY = "your_secret_key"  # 발급받은 Secret Key로 변경

# 거래할 암호화폐 티커 설정 (기본값: KRW-BTC)
TICKER = "KRW-BTC"  # 원하는 암호화폐 티커로 변경 가능 (예: KRW-ETH, KRW-XRP 등)

# 초기 자본금 설정
INITIAL_CAPITAL = 1000000  # 필요시 변경 가능
```

### 4. 프로그램 실행
```
python upbit_trading_bot_final.py
```

## 주요 기능 설명

### 1. 자동 거래 기능
- 5분마다 시장 데이터를 분석하여 매수/매도 신호를 감지합니다.
- 매수/매도 신호 발생 시 자동으로 주문을 실행합니다.
- 현재 상태(가격, 자본금, 수익금)를 실시간으로 출력합니다.

### 2. 로깅 기능
- 모든 거래 내역과 오류는 `trading_log.txt` 파일에 기록됩니다.
- 로그 파일을 통해 거래 내역을 추적하고 문제 발생 시 원인을 파악할 수 있습니다.

### 3. 오류 처리 기능
- API 연결 오류, 주문 실패 등의 예외 상황을 처리합니다.
- 프로그램 실행 중 오류 발생 시 보유 중인 코인을 자동으로 매도하여 손실을 최소화합니다.

## 주의사항
1. 이 프로그램은 실제 자금으로 거래를 수행하므로 신중하게 사용해야 합니다.
2. 암호화폐 시장은 변동성이 크므로 투자 위험이 있습니다.
3. API 키는 절대로 타인에게 공유하지 마세요.
4. 처음에는 소액으로 테스트한 후 점진적으로 자본금을 늘리는 것을 권장합니다.
5. 프로그램 종료는 Ctrl+C를 눌러 수행할 수 있습니다.

## 커스터마이징 방법
- 다른 거래 전략을 적용하려면 `check_buy_signal`과 `check_sell_signal` 함수를 수정하세요.
- 다른 시간 프레임을 사용하려면 `get_ohlcv` 함수의 `interval` 파라미터를 변경하세요.
- 이동평균 기간을 변경하려면 `calculate_sma` 함수의 `period` 파라미터를 변경하세요.
